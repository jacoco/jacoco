<?xml version="1.0" encoding="UTF-8"?>

<project name="Run Ant Unit Tests" xmlns:au="antlib:org.apache.ant.antunit" basedir="." default="test">

	<taskdef uri="antlib:org.apache.ant.antunit" resource="org/apache/ant/antunit/antlib.xml">
		<classpath>
			<fileset dir="lib" includes="*.jar"/>
		</classpath>
	</taskdef>
	
	<target name="test">
		<au:antunit failonerror="true">
			<propertyset>
				<propertyref name="result.dist.lib.dir"/>
				<propertyref name="result.tmp.bundle.testdata.dir"/>
				<propertyref name="result.tmp.bundle.classes.dir"/>
				<propertyref name="target.plugins.dir"/>
			</propertyset>
	    	
			<fileset dir="test" includes="*.xml"/>
			<!-- The XML Listener is broken in a few ways:
	    	     Attempts to create package names for the tests, but only works if tests are under the base dir
	    	     XML result is not parseable by the eclipse junit framework
			-->
			<!--
			<au:xmllistener todir="${result.tmp.bundle.test.dir}" loglevel="info"/>
			-->
			<au:plainlistener sendLogTo="ant" logLevel="info"/>
		</au:antunit>
	</target>

</project>